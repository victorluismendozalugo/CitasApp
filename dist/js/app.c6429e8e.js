(function(e){function t(t){for(var i,o,c=t[0],s=t[1],l=t[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,c=1;c<a.length;c++){var s=a[c];0!==n[s]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},n={app:0},r=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("27fb")},"27fb":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=a("5f5b"),r=a("b1e0");a("ab8b"),a("2dd8");i["default"].use(n["a"]),i["default"].use(r["a"]);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("citas")],1)},c=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-xl",modifiers:{"modal-xl":!0}}],attrs:{variant:"dark"},on:{click:e.abrirModal}},[e._v("Aparta tu cita")]),a("b-modal",{attrs:{id:"modal-xl",size:"xl",title:"Citas","hide-header":"","no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"mt-3"},[a("b-button-group",[a("p",{staticClass:"float-left"}),a("b-button",{staticClass:"float-left",attrs:{variant:"primary",size:"sm"},on:{click:e.hide}},[e._v("\n            Cerrar\n          ")]),a("p",{staticClass:"float-right"}),a("b-button",{staticClass:"float-right",attrs:{variant:"success",size:"sm"},on:{click:function(t){return e.registrarCita()}}},[e._v("\n            Registrar cita\n          ")])],1)],1)]},proxy:!0}])},[a("b-row",[a("b-col",[a("b-calendar",e._b({staticStyle:{"border-radius":"9px"},attrs:{locale:e.locale,"hide-header":e.hideHeader,"date-disabled-fn":e.dateDisabled,min:e.minDate},on:{context:e.onContext},model:{value:e.cita.citaFecha,callback:function(t){e.$set(e.cita,"citaFecha",t)},expression:"cita.citaFecha"}},"b-calendar",e.labels[e.locale]||{},!1))],1),a("b-col",[a("div",[a("b-form-group",[a("br"),a("b-form-checkbox-group",{staticClass:"flex-wrap",staticStyle:{"column-count":"2"},attrs:{options:e.horariosDisponibles,buttons:"","button-variant":"primary",name:"buttons-2",state:e.state},model:{value:e.horariosSelected,callback:function(t){e.horariosSelected=t},expression:"horariosSelected"}}),a("b-form-invalid-feedback",{attrs:{state:e.state}},[e._v("Seleccione un horario")]),a("b-form-valid-feedback",{attrs:{state:e.state}},[e._v("Gracias")])],1)],1)])],1),a("br"),a("b-row",[a("b-card",[a("label",[e._v("Seleccione el motivo de su cita")]),a("b-card-body",[a("b-select",{staticClass:"form-control",staticStyle:{"border-radius":"9px"},model:{value:e.cita.citaTipo,callback:function(t){e.$set(e.cita,"citaTipo",t)},expression:"cita.citaTipo"}},[a("b-form-select-option",{attrs:{value:"0"}},[e._v("Motivo")]),e._l(e.motivos,(function(t){return a("option",{key:t.tipoID,staticClass:"dropdown-item",staticStyle:{"border-radius":"20px"},domProps:{value:t.tipoID}},[e._v("\n              "+e._s(t.tipoDescripcion)+"\n            ")])}))],2)],1)],1)],1),a("br"),a("b-row",[a("b-card",[a("label",[e._v("Favor de ingresar sus datos")]),a("b-card-body",[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-4 col-md-4 col-lg-3 col-xl-3"},[a("b-form-input",{attrs:{id:"input-1",placeholder:"Nombre",required:"",maxlength:"20"},on:{input:function(t){e.cita.clienteNombre=t.toUpperCase()}},model:{value:e.cita.clienteNombre,callback:function(t){e.$set(e.cita,"clienteNombre",t)},expression:"cita.clienteNombre"}})],1),a("div",{staticClass:"col-sm-4 col-md-4 col-lg-3 col-xl-3"},[a("b-form-input",{attrs:{id:"input-2",placeholder:"Apellido",required:"",maxlength:"20"},on:{input:function(t){e.cita.clienteAp=t.toUpperCase()}},model:{value:e.cita.clienteAp,callback:function(t){e.$set(e.cita,"clienteAp",t)},expression:"cita.clienteAp"}})],1),a("div",{staticClass:"col-sm-4 col-md-4 col-lg-3 col-xl-3"},[a("b-form-input",{attrs:{id:"input-3",type:"email",placeholder:"Correo",required:"",maxlength:"100"},on:{input:function(t){e.cita.clienteEmail=t.toUpperCase()}},model:{value:e.cita.clienteEmail,callback:function(t){e.$set(e.cita,"clienteEmail",t)},expression:"cita.clienteEmail"}})],1),a("div",{staticClass:"col-sm-4 col-md-3 col-lg-3 col-xl-3"},[a("b-form-input",{attrs:{id:"input-4",type:"text",placeholder:"Teléfono",required:"",maxlength:"10"},model:{value:e.cita.clienteTelefono,callback:function(t){e.$set(e.cita,"clienteTelefono",t)},expression:"cita.clienteTelefono"}})],1)])])])],1)],1)],1)],1)},l=[],u=a("1da1"),d=(a("96cf"),a("d3b7"),a("bc3a")),p=a.n(d),f={apiUrl:"http://citas.fusionsofts.com/api/"},h=f,b=a("3d20"),m=a.n(b),v=!1,g=p.a.create({headers:{"api-key":123},baseURL:h.apiUrl});g.interceptors.request.use((function(e){var t=window.localStorage.token;return t&&(e.headers.authorization="Bearer ".concat(t)),e}),(function(e){return m.a.fire({text:"Ocurrio un error al realizar la peticion al servidor",icon:"warning"}),Promise.reject(e)})),g.interceptors.response.use((function(e){return e}),(function(e){console.log("error-51",e);e.config;var t=e.response;if(null!=t)if(401===t.status){if(!v){v=!0;p.a.create({baseURL:h.apiUrl})}}else m.a.fire({text:"La sesión ha caducado",icon:"warning"});return Promise.reject(e)}));var x=g,w={citasXdia:function(e){return x.post("citas/citas/dia",e).then((function(e){return e.data})).catch((function(e){console.log(e)}))},citasGuardar:function(e){return x.post("citas/citas/guardar",e).then((function(e){return e.data})).catch((function(e){console.log(e)}))},citasMotivos:function(e){return x.post("citas/tipos",e).then((function(e){return e.data})).catch((function(e){console.log(e)}))}},y=w,D={name:"Citas",data:function(){return{cita:{citaID:0,citaTipo:0,clienteNombre:"",clienteAp:"",clienteTelefono:"",clienteEmail:"",citaFecha:"",sucursalID:1,citaDiaID:0},motivos:[],context:null,showDecadeNav:!1,hideHeader:!0,locale:"es-MX",labels:{"es-MX":{weekdayHeaderFormat:"narrow",labelPrevDecade:"Década anterior",labelPrevYear:"Año anterior",labelPrevMonth:"Mes anterior",labelCurrentMonth:"Mes actual",labelNextMonth:"Próximo mes",labelNextYear:"Próximo año",labelNextDecade:"Próxima década",labelToday:"Hoy",labelSelected:"Fecha seleccionada",labelNoDateSelected:"Sin fecha seleccionada",labelCalendar:"Calendario",labelNav:"Navegación por calendario",labelHelp:"Use las teclas de flecha para navegar por el calendario"}},horariosSelected:[],horariosDisponibles:[],text:"",minDate:""}},mounted:function(){this.getMotivosCitas(),this.obtieneFechaMinima()},computed:{state:function(){return this.verificaChecks(),1===this.horariosSelected.length}},methods:{abrirModal:function(){this.$bvModal.show("modal-xl")},hide:function(){this.$bvModal.hide("modal-xl")},onContext:function(e){this.context=e,this.obtieneHorariosDisponibles()},dateDisabled:function(e,t){var a=t.getDay();t.getDate();return 0===a},verificaChecks:function(){this.cita.citaDiaID=this.horariosSelected[0],this.horariosSelected.length>1&&(this.$msg.error("Solamente puede seleccionar un horario"),this.horariosSelected=[],this.cita.citaDiaID=0)},obtieneHorariosDisponibles:function(){var e=this;""!=this.cita.citaFecha&&(this.horariosDisponibles=[],this.horariosSelected=[],y.citasXdia({SucursalID:1,CitaFecha:this.cita.citaFecha}).then(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(a){var i,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value){t.next=5;break}for(i=a.data.data,n=0;n<i.length;n++)r={text:i[n].citaHora,value:i[n].citaID,disabled:i[n].estatusCitaHora},e.horariosDisponibles.push(r);t.next=7;break;case 5:return t.next=7,e.$msg.warning(a.message);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$msg.error("El servicio no se encuentra disponible");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},getMotivosCitas:function(){var e=this;y.citasMotivos({SucursalID:1,TipoID:0}).then(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value){t.next=4;break}e.motivos=a.data.data,t.next=6;break;case 4:return t.next=6,e.$msg.warning(a.message);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$msg.error("El servicio no se encuentra disponible");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},validarDatos:function(){return 0!=this.cita.citaTipo&&""!=this.cita.clienteNombre&&""!=this.cita.clienteAp&&""!=this.cita.clienteTelefono&&""!=this.cita.clienteEmail&&""!=this.cita.citaFecha&&0!=this.cita.citaDiaID||(this.$msg.error("Favor de registrar todos los datos para hacer el registro de su cita"),!1)},registrarCita:function(){var e=this;this.validarDatos()&&y.citasGuardar(this.cita).then(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:1==a.data.codigoError?e.$msg.error(a.message):(e.$msg.ok(a.message),e.inicializarCampos(),e.hide());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$msg.error("El servicio no se encuentra disponible");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},obtieneFechaMinima:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);this.minDate=new Date(t)},inicializarCampos:function(){this.cita.citaID=0,this.cita.citaTipo=0,this.cita.clienteNombre="",this.cita.clienteAp="",this.cita.clienteTelefono="",this.cita.clienteEmail="",this.cita.citaFecha="",this.cita.sucursalID=1,this.cita.citaDiaID=0,this.horariosDisponibles=[],this.horariosSelected=[]}}},C=D,k=a("2877"),S=Object(k["a"])(C,s,l,!1,null,null,null),M=S.exports,_={name:"App",components:{Citas:M},data:function(){return{}},mounted:function(){},methods:{}},$=_,O=(a("034f"),Object(k["a"])($,o,c,!1,null,null,null)),T=O.exports,j=a("2f62");i["default"].use(j["a"]);var N=new j["a"].Store({state:{},mutations:{},getters:{},actions:{},modules:{}}),F={install:function(e){e.prototype.$swal=m.a}},P=F,I={},R=m.a.mixin({customClass:{confirmButton:"btn btn-primary mx-2 btn-width-100",cancelButton:"btn btn-danger mx-2 btn-width-100"},buttonsStyling:!1,allowEscapeKey:!1,allowOutsideClick:!1});I.show=function(e,t){return R.fire({text:e,icon:t,confirmButtonText:"Aceptar"})},I.ok=function(e){return I.show(e,"")},I.info=function(e){return I.show(e,"info")},I.success=function(e){return I.show(e,"success")},I.error=function(e){return I.show(e,"error")},I.warning=function(e){return I.show(e,"warning")},I.question=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"question";return R.fire({text:e,icon:t,showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"})},I.install=function(e){e.prototype.$msg=I};var E=I;i["default"].use(P),i["default"].use(E),i["default"].config.productionTip=!1,new i["default"]({store:N,render:function(e){return e(T)}}).$mount("#app")}});
//# sourceMappingURL=app.c6429e8e.js.map